{"version":3,"sources":["webpack:///webpack/bootstrap 0bc46eee4cf9316509f9","webpack:///./src/main/resources/static/js/plaid.js","webpack:///./src/main/resources/static/js/lib/local.js"],"names":["lib","require","handler","Plaid","create","env","PLAID_ENV","key","PLAID_PUBLIC_KEY","apiVersion","clientName","product","onSuccess","public_token","post","$","fadeOut","hide","fadeIn","on","e","open","get","data","slideUp","html","accounts","forEach","account","idx","name","balances","available","current","subtype","mask","slideDown","console","log","then","error","institution","item","billedProducts","join","availableProducts","errorHtml","error_code","error_message","transactions","txn","amount","date","module","exports","settings","url","window","location","origin","rateLimit","token","attr","header","addData","fetch","method","credentials","headers","body","JSON","stringify","response","json","deleteData","updateData","getData","type","parameter","query","redirect","agent","btoa","status","Promise","reject","bind"],"mappings":"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","file":"plaid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 180);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0bc46eee4cf9316509f9","const lib =  require('./lib/local');\n\nconst handler = Plaid.create({\n    env: PLAID_ENV,\n    key: PLAID_PUBLIC_KEY,\n\n    apiVersion: 'v2',\n    clientName: 'Pennywise',\n    product: ['transactions'],\n\n    onSuccess: function(public_token) {\n        lib.post('plaid/get_access_token', {\n            public_token: public_token\n        }, function() {\n            $('#container').fadeOut('fast', function() {\n                $('#intro').hide();\n                $('#app, #steps').fadeIn('slow');\n            });\n        });\n    },\n});\n\n$('#link-btn').on('click', function(e) {\n    handler.open();\n});\n\n$('#get-accounts-btn').on('click', function(e) {\n    $.get('/api/plaid/accounts', function(data) {\n        $('#get-accounts-data').slideUp(function() {\n            var html = '';\n            data.accounts.forEach(function(account, idx) {\n                html += '<div class=\"inner\">';\n                html += '<strong>' + account.name +\n                    ' $' + (account.balances.available != null ? account.balances.available : account.balances.current) + '</strong><br/>';\n                html += account.subtype + ' ' + account.mask;\n                html += '</div>';\n            });\n\n            $(this).html(html).slideDown();\n        });\n    });\n});\n\n$('#get-item-btn').on('click', function(e) {\n    console.log(\"getting items\");\n    lib.post('plaid/item').then(function(data) {\n        $('#get-item-data').slideUp(function() {\n            if (data.error) {\n                $(this).html('<p>' + data.error + '</p>').slideDown();\n            } else {\n                console.log('no error');\n                var html = '<div class=\"inner\">';\n                html += '<p>Here\\'s some basic information about your Item:</p>';\n                html += '<p>Institution name:' + data.institution.name + '</p>';\n                html += '<p>Billed products: ' + data.item.billedProducts.join(', ') + '</p>';\n                html += '<p>Available products: ' + data.item.availableProducts.join(', ') + '</p>';\n                html += '</div>';\n\n                $(this).html(html).slideDown();\n            }\n        });\n    });\n});\n\n$('#get-transactions-btn').on('click', function(e) {\n    lib.post('plaid/transactions').then(function(data) {\n        if (data.error != null) {\n            // Format the error\n            var errorHtml = '<div class=\"inner\"><p>' +\n                '<strong>' + data.error.error_code + ':</strong> ' +\n                data.error.error_message + '</p></div>';\n\n            if (data.error.error_code === 'PRODUCT_NOT_READY') {\n                // Add additional context for `PRODUCT_NOT_READY` errors\n                errorHtml += '<div class=\"inner\"><p>The PRODUCT_NOT_READY ' +\n                    'error is returned when a request to retrieve Transaction data ' +\n                    'is made before Plaid finishes the <a href=\"https://plaid.com/' +\n                    'docs/quickstart/#transaction-data-with-webhooks\">initial ' +\n                    'transaction pull.</a></p></div>';\n            }\n            // Render the error\n            $('#get-transactions-data').slideUp(function() {\n                $(this).slideUp(function() {\n                    $(this).html(errorHtml).slideDown();\n                });\n            });\n        } else {\n            $('#get-transactions-data').slideUp(function() {\n                var html = '';\n                data.transactions.forEach(function(txn, idx) {\n                    html += '<div class=\"inner\">';\n                    html += '<strong>' + txn.name + '</strong><br/>';\n                    html += '$' + txn.amount;\n                    html += '<br/><em>' + txn.date + '</em>';\n                    html += '</div>';\n                });\n\n                $(this).slideUp(function() {\n                    $(this).html(html).slideDown();\n                });\n            });\n        }\n    });\n});\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/plaid.js","// Functions for local json file interactions\nmodule.exports = {\n\n    settings: { //settings\n        url: window.location.origin + \"/api/\",\n        rateLimit: 5,\n        token: $(\"meta[name='_csrf']\").attr(\"content\"),\n        header: $(\"meta[name='_csrf_header']\").attr(\"content\")\n    },\n\n    //Inserts data into server\n    addData: (location, data) => {\n        location = typeof location !== 'undefined' ? location : \"\";\n        return fetch(module.exports.settings.url + location, {\n            method: \"post\",\n            credentials: \"same-origin\",\n            headers: {\n                \"X-CSRF-Token\": module.exports.settings.token,\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        }).then(response => response.json());\n    },\n\n    deleteData: (location, data) => {\n        return module.exports.addData(location, data);\n    },\n\n    updateData: (location, data) => {\n        return module.exports.addData(location, data);\n    },\n\n    post: (location, data) => {\n        return module.exports.addData(location, data);\n    },\n\n    getData: (type, parameter, query) => {\n        parameter = typeof parameter !== 'undefined' ? parameter : \"\";\n        query = typeof query !== 'undefined' ? query : \"\";\n\n        return fetch(module.exports.settings.url + type +\"/\"+ parameter + query,\n            {\n            method: 'GET',\n                credentials: 'same-origin',\n                redirect: 'follow',\n                agent: null,\n                headers: {\n                    \"Content-Type\": \"text/plain\",\n                    'Authorization': 'Basic '+btoa('username:password')\n                }\n            }).then((response) => {\n                let json = response.json();\n                if (response.status >= 200 && response.status < 300) {\n                    return json;\n                } else {\n                    return json.then(Promise.reject.bind(Promise));\n                }\n        });\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/lib/local.js"],"sourceRoot":""}